sudo: required
dist: trusty

before_install:
  - sudo apt-get -qq update
  - sudo apt-get -y install python3-pip texlive-full
  - sudo pip3 install --upgrade pip
  - sudo pip3 install sphinx
  - sudo pip3 install sphinx_bootstrap_theme

env:
  matrix:
  - COMMAND="make clean && make html"
  - COMMAND="make clean && make latexpdf"
  - COMMAND="make clean && make epub"
  
addons:
  ssh_known_hosts: 23.92.28.147

deploy:
  provider: script
  skip_cleanup: true
  script: rsync -r --delete-after --quiet $TRAVIS_BUILD_DIR/ aaron@23.92.28.147:/home/aaron/
  on:
    branch: kubuntu-16.04-LTS

notifications:
  email:
  - aaronhoneycutt@kubuntu.org
  irc: "irc://chat.freenode.net:6667#kubuntu-devel"

script:
  - bash -c "$COMMAND"
