sudo: required
dist: trusty

before_install:
  - sudo apt-get -qq update
  - sudo apt-get -y install python3-pip texlive-full
  - sudo pip3 install --upgrade pip
  - sudo pip3 install sphinx
  - sudo pip3 install sphinx_bootstrap_theme

env:
  matrix:
  - COMMAND="make clean && make html"
  - COMMAND="make clean && make latexpdf"
  - COMMAND="make clean && make epub"

deploy:
  provider: releases
  api_key:
    secure: 7ffd2c4a77f748df14ec04fda46a422e6e697fdb
  file: TRAVIS_BUILD_DIR/build/epub/KubuntuManual.epub
  skip_cleanup: true
  on:
    tags: true
  
notifications:
  email: 
     - aaronhoneycutt@kubuntu.org
  pushover:
    api_key: [arievyx8tbx5z5gxjh6p44sb9mwmpc]
    users:
      - [usmitnk6my6gv8dgvdxmx395omemou]
  irc: "irc://chat.freenode.net:6667#kubuntu-devel"

script:
  - bash -c "$COMMAND"
